{"ast":null,"code":"import { fork, take, call, put, delay, takeLatest, select, takeEvery } from \"redux-saga/effects\";\nimport * as workTypes from \"../constansts/work\";\nimport { getList, addWork, updateWork } from '../apis/work';\nimport { showLoading, hideLoading } from '../actions/loading';\n;\nimport { fetchWorksSuccess, fetchWorksFailed, addWorkSuccess, updateWorkSuccess } from '../actions/work';\nimport { toast } from 'react-toastify';\nimport { hideModal } from \"../actions/modal\";\nimport * as workApis from '../apis/work'; // các công việc đã thực hiện\n// bươc 1: xử lý hàm fetch_works\n// bước 2: thực hiện call api\n// bước 3: nếu success thì sẽ trả về data\n// bước 4: chạy hàm fetchWorksSuccess\n// bước 5: thực thi những hàm còn lại\n\nfunction* watchFetchListWorkAction() {\n  yield take(workTypes.FETCH_WORKS);\n  yield put(showLoading());\n  const res = yield call(getList);\n  const {\n    status,\n    data\n  } = res;\n\n  if (status === 200) {\n    yield put(fetchWorksSuccess(data));\n    yield toast.success(\"Lấy dữ liệu thành công\");\n  } else {\n    yield put(fetchWorksFailed(err));\n    yield toast.error(\"lấy dữ liệu thất bại\");\n  }\n\n  yield delay(1000);\n  yield put(hideLoading());\n}\n\nfunction* filterWorkSaga({\n  payload\n}) {\n  const {\n    keyword\n  } = payload;\n  delay(500);\n  const listWorks = yield workApis.getList().then(res => {\n    const {\n      data\n    } = res;\n    return data;\n  });\n  console.log(keyword);\n  console.log(listWorks);\n  const filterWorks = listWorks.filter(work => work.name_work.trim().toLowerCase().includes(keyword.trim().toLowerCase()));\n  console.log(filterWorks);\n  yield put(fetchWorksSuccess(filterWorks));\n}\n\nfunction* addWorkSaga({\n  payload\n}) {\n  const {\n    name_work,\n    description,\n    time,\n    userId,\n    status\n  } = payload.work;\n  yield put(showLoading());\n  const resp = yield call(addWork, {\n    name_work,\n    description,\n    time,\n    userId,\n    status\n  });\n  const {\n    data\n  } = resp;\n\n  if (resp.status === 201) {\n    yield put(addWorkSuccess(data));\n  }\n\n  yield put(hideModal());\n  delay(500);\n  yield put(hideLoading());\n}\n\nfunction* updateWorkSaga({\n  payload\n}) {\n  console.log(payload);\n  const {\n    name_work,\n    description,\n    time,\n    userId,\n    status\n  } = payload.work;\n  const workEditing = yield select(state => state.works.workEditing);\n  yield put(showLoading());\n  const resp = yield call(updateWork, {\n    name_work,\n    description,\n    time,\n    userId,\n    status\n  }, workEditing.id);\n  const {\n    data\n  } = resp;\n\n  if (resp.status === 200) {\n    yield put(updateWorkSuccess(data));\n  }\n\n  yield put(hideModal());\n  delay(500);\n  yield put(hideLoading());\n}\n\nfunction* rootSaga() {\n  yield fork(watchFetchListWorkAction);\n  yield takeLatest(workTypes.FILTER_WORKS, filterWorkSaga);\n  yield takeEvery(workTypes.ADD_WORKS, addWorkSaga);\n  yield takeLatest(workTypes.UPDATE_WORKS, updateWorkSaga);\n}\n\nexport default rootSaga;","map":{"version":3,"sources":["/home/thienncb/Desktop/redux-saga/src/sagas/index.js"],"names":["fork","take","call","put","delay","takeLatest","select","takeEvery","workTypes","getList","addWork","updateWork","showLoading","hideLoading","fetchWorksSuccess","fetchWorksFailed","addWorkSuccess","updateWorkSuccess","toast","hideModal","workApis","watchFetchListWorkAction","FETCH_WORKS","res","status","data","success","err","error","filterWorkSaga","payload","keyword","listWorks","then","console","log","filterWorks","filter","work","name_work","trim","toLowerCase","includes","addWorkSaga","description","time","userId","resp","updateWorkSaga","workEditing","state","works","id","rootSaga","FILTER_WORKS","ADD_WORKS","UPDATE_WORKS"],"mappings":"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","sourcesContent":["import { fork, take,call,put,delay, takeLatest, select, takeEvery} from \"redux-saga/effects\";\nimport * as workTypes from \"../constansts/work\";\nimport {getList,addWork,updateWork} from '../apis/work';\nimport {showLoading , hideLoading} from '../actions/loading';;\nimport {fetchWorksSuccess, fetchWorksFailed, addWorkSuccess, updateWorkSuccess} from '../actions/work';\nimport { toast } from 'react-toastify';\nimport { hideModal } from \"../actions/modal\";\nimport * as workApis from '../apis/work';\n// các công việc đã thực hiện\n// bươc 1: xử lý hàm fetch_works\n// bước 2: thực hiện call api\n// bước 3: nếu success thì sẽ trả về data\n// bước 4: chạy hàm fetchWorksSuccess\n// bước 5: thực thi những hàm còn lại\nfunction* watchFetchListWorkAction() {\n    yield take(workTypes.FETCH_WORKS);\n    yield put(showLoading());\n    const res = yield call(getList);\n    const {status, data} = res;\n    if(status === 200){\n        yield put(fetchWorksSuccess(data));\n        yield toast.success(\"Lấy dữ liệu thành công\");\n    }else{\n        yield put(fetchWorksFailed(err));\n        yield toast.error(\"lấy dữ liệu thất bại\");\n    }\n    yield delay(1000);\n    yield put(hideLoading());\n }\n function* filterWorkSaga({payload}){\n     const {keyword} = payload;\n     delay(500);\n     const listWorks = yield workApis.getList().then(res => {\n        const {data} = res;\n        return data;\n    });\n     console.log(keyword);\n     console.log(listWorks);\n     const filterWorks = listWorks.filter(\n        work => work.name_work\n        .trim()\n        .toLowerCase()\n        .includes(keyword.trim().toLowerCase())\n\n     );\n    console.log(filterWorks);\n     yield put(fetchWorksSuccess(filterWorks));\n }\n function* addWorkSaga ({payload}){\n    const {name_work,description, time, userId,status} = payload.work;\n    yield put(showLoading());\n    const resp = yield call(addWork,{\n        name_work,\n        description,\n        time,\n        userId,\n        status\n    });\n    const {data} = resp;\n    if(resp.status === 201){\n        yield put(addWorkSuccess(data));\n    }\n    yield put(hideModal());\n    delay(500);\n    yield put(hideLoading());\n }\n\n function* updateWorkSaga({payload}){\n     console.log(payload)\n    const {name_work,description, time, userId,status} = payload.work;\n    const workEditing = yield select(state=>state.works.workEditing);\n    yield put(showLoading());\n    const resp = yield call(updateWork,{\n        name_work,\n        description,\n        time,\n        userId,\n        status\n    },workEditing.id);\n    const {data} = resp;\n    if(resp.status === 200){\n        yield put(updateWorkSuccess(data));\n    }\n    yield put(hideModal());\n    delay(500);\n    yield put(hideLoading());\n }\nfunction* rootSaga(){\n    yield fork(watchFetchListWorkAction);\n    yield takeLatest(workTypes.FILTER_WORKS, filterWorkSaga);\n    yield takeEvery(workTypes.ADD_WORKS,addWorkSaga);\n    yield takeLatest(workTypes.UPDATE_WORKS,updateWorkSaga)\n}\n\n\nexport default rootSaga;\n"]},"metadata":{},"sourceType":"module"}